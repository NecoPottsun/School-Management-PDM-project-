CREATE TABLE Classes(
class_id VARCHAR(30),
subject_code VARCHAR(30),
room_number VARCHAR(10) DEFAULT 'undecided',
weekday VARCHAR(10) DEFAULT 'undecided',
time VARCHAR(10) CHECK(time IN('8 a.m','10 a.m','1 p.m', '3 p.m','none')) DEFAULT 'none',
PRIMARY KEY(class_id),	
CONSTRAINT FK_CourseClasses
FOREIGN KEY (subject_code) REFERENCES Course(subject_code) ON UPDATE CASCADE ON DELETE CASCADE,
CONSTRAINT UC_Class UNIQUE(room_number,weekday)
);
CREATE TABLE Teach(
id_staff VARCHAR(20),
class_id VARCHAR(30) NOT NULL,
PRIMARY KEY(id_staff,class_id),
CONSTRAINT FK_ClassesTeach
FOREIGN KEY (class_id) REFERENCES Classes(class_id) ON UPDATE CASCADE ON DELETE CASCADE,
CONSTRAINT FK_StaffTeach
FOREIGN KEY (id_staff) REFERENCES Staff(id_staff) ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE Study(
roll_no VARCHAR(20) NOT NULL,
class_id VARCHAR(30) NOT NULL,
PRIMARY KEY(roll_no,class_id),
CONSTRAINT FK_ClassesStudy
FOREIGN KEY (class_id) REFERENCES Classes(class_id) ON UPDATE CASCADE ON DELETE CASCADE,
CONSTRAINT FK_StudentStudy
FOREIGN KEY (roll_no) REFERENCES Student(roll_no) ON UPDATE CASCADE ON DELETE CASCADE
);



INSERT INTO Classes VALUES('ITIT18IU01','IT01IU','A1-202','Friday','1 p.m');
INSERT INTO Classes VALUES('ITIT18IU02','IT02IU','LA1-605','Monday','8 a.m');
INSERT INTO Classes VALUES('ITIT17IU03','IT03IU','A1-404','Wednesday','8 a.m');
INSERT INTO Classes VALUES('ITIT17IU04','IT04IU','LA1-606','Tuesday','8 a.m');
INSERT INTO Classes VALUES('ITIT18UN05','IT05UN','A2-408','Tuesday','1 p.m');
INSERT INTO Classes VALUES('ITIT18IU08','IT08IU','B-701','Thursday','1 p.m');
INSERT INTO Classes VALUES('ITIT18IU09','IT09IU','LA1-607','Wednesday','1 p.m');
INSERT INTO Classes VALUES('ITIT17IU10','IT10IU','A2-301','Sunday','8 a.m');
INSERT INTO Classes VALUES ('ITIT17IU11','IT11IU','LA1-607','Friday','8 a.m');
INSERT INTO Classes VALUES('ITIT18IU03','PH03IU','A1-403','Tuesday', '1 p.m'); 
INSERT INTO Classes VALUES('ITIT19IU01','PH01IU','A2-408','Wednesday', '1 p.m');

INSERT INTO Study VALUES('ITITIU13232','ITIT18UN05');
INSERT INTO Study VALUES('ITITIU13232','ITIT18IU01');
INSERT INTO Study VALUES('ITITIU13232','ITIT18IU02');
INSERT INTO Study VALUES('ITITIU13232','ITIT17IU03');
INSERT INTO Study VALUES('ITITIU13232','ITIT17IU04');
INSERT INTO Study VALUES('ITITIU13232','ITIT19IU01');



INSERT INTO Study VALUES('ITITIU14785','ITIT18IU01');
INSERT INTO Study VALUES('ITITIU14785','ITIT18IU01');
INSERT INTO Study VALUES('ITITIU14785','ITIT18IU02');
INSERT INTO Study VALUES('ITITIU14785','ITIT18IU09');
INSERT INTO Study VALUES('ITITIU14785','ITIT17IU11');
INSERT INTO Study VALUES('ITITIU14785','ITIT18IU08');


INSERT INTO Study VALUES('BABAIU15555','ITIT18IU03');
INSERT INTO Study VALUES('BABAIU15555','ITIT18IU09');
INSERT INTO Study VALUES('BABAIU15555','ITIT17IU04');
INSERT INTO Study VALUES('BABAIU15555','ITIT18IU08');

INSERT INTO Study VALUES('CECEIU16542','ITIT18IU02');
INSERT INTO Study VALUES('CECEIU16542','ITIT18IU03');
INSERT INTO Study VALUES('CECEIU16542','ITIT18UN05');

INSERT INTO Study VALUES('IEIEIU18456','ITIT18IU02');
INSERT INTO Study VALUES('IEIEIU18456','ITIT17IU04');


INSERT INTO Study VALUES('BTBTIU17562','ITIT17IU03');
INSERT INTO Study VALUES('BTBTIU17562','ITIT18IU09');
INSERT INTO Study VALUES('BTBTIU17562','ITIT17IU04');
INSERT INTO Study VALUES('BTBTIU17562','ITIT18IU08');


INSERT INTO Study VALUES('BABAIU15234','ITIT18IU03');
INSERT INTO Study VALUES('BABAIU15234','ITIT18UN05');
INSERT INTO Study VALUES('BABAIU15234','ITIT18IU02');
INSERT INTO Study VALUES('BABAIU15234','ITIT18IU01');

INSERT INTO Study VALUES('CECEIU17878','ITIT18UN05');
INSERT INTO Study VALUES('CECEIU17878','ITIT17IU04');
INSERT INTO Study VALUES('CECEIU17878','ITIT17IU11');

INSERT INTO Study VALUES('IEIEIU19236','ITIT18IU09');
INSERT INTO Study VALUES('IEIEIU19236','ITIT18IU03');
INSERT INTO Study VALUES('IEIEIU19236','ITIT17IU11');
INSERT INTO Study VALUES('IEIEIU19236','ITIT18IU08');

INSERT INTO Study VALUES('BTBTIU18649','ITIT17IU11');
INSERT INTO Study VALUES('BTBTIU18649','ITIT17IU04');
INSERT INTO Study VALUES('BTBTIU18649','ITIT18IU02');



INSERT INTO Teach VALUES('IT1','ITIT18IU01');
INSERT INTO Teach VALUES('IT1','ITIT17IU03');
INSERT INTO Teach VALUES ('IT2','ITIT18IU02');
INSERT INTO Teach VALUES ('IT2','ITIT18IU09');
INSERT INTO Teach VALUES ('IT3','ITIT17IU03');
INSERT INTO Teach VALUES ('IT3','ITIT18IU01');
INSERT INTO Teach VALUES('BA1','ITIT18IU03');
INSERT INTO Teach VALUES('BA1','ITIT17IU11');
INSERT INTO Teach VALUES('BT1','ITIT18IU09');
INSERT INTO Teach VALUES('BT1','ITIT17IU04');
INSERT INTO Teach VALUES('IE1','ITIT17IU11');
INSERT INTO Teach VALUES('IE1','ITIT18UN05');
INSERT INTO Teach VALUES('CE1','ITIT17IU04');
INSERT INTO Teach VALUES('CE1','ITIT18IU08');
INSERT INTO Teach VALUES('BT2','ITIT18UN05');
INSERT INTO Teach VALUES('BT2','ITIT18IU03');
INSERT INTO Teach VALUES('CE1','ITIT19IU01');

SELECT * FROM Course;
SELECT * FROM Classes;
SELECT * FROM Study;
SELECT * FROM Teach;


--Display schedule info for student: roll_no,class_id,subject_code, name_subject, credit, room_number, weekday,time
SELECT s.roll_no, classes.class_id, c.subject_code, c.name_subject, c.credit, classes.room_number, classes.weekday, classes.time
FROM Student s, Course c, Classes classes , Study study
WHERE s.roll_no = study.roll_no AND study.class_id = classes.class_id AND classes.subject_code = c.subject_code 
AND s.roll_no = '';

--Display schedule info for teacher: staff_id,class_id,subject_code, name_subject, credit, room_number, weekday,time
SELECT s.id_staff, classes.class_id, c.subject_code, c.name_subject, c.credit, classes.room_number, classes.weekday, classes.time
FROM Staff s, Course c, Classes classes , Teach t
WHERE s.id_staff = t.id_staff AND t.class_id= classes.class_id AND classes.subject_code = c.subject_code 
AND s.id_staff = '';

